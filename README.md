# yunusovtr_platform
yunusovtr Platform repository

## Домашнее задание к уроку №2

- Подготовил репозиторий yunusovtr-platform для работы, внёс необходимые файлы для работы автотестов
- Задание: Разберитесь почему все pod в namespace kube-system восстановились
  - поды для etcd, kube-apiserver, kube-controller-manager, kube-scheduler являются статичными и управляет ими kubelet ноды, которая в minikube имеет имя minikube. Манифесты для них находятся в обычных файлах /etc/kubernetes/manifests.
  - core-dns и kube-proxy - это Deployment и DaemonSet, манифесты которых сохраняются в базе etcd и становятся доступными после поднятия пода etcd.
- Подготовил Dockerfile для web-сервера nginx по условиям
- Создал манифест пода web, создал основной и инит-контейнеры, проверил работоспособность пода и открытие целевой страницы
- Склонировал репозиторий https://github.com/GoogleCloudPlatform/microservices-demo
- Собрал образ hipster-frontend, отправил в docker hub
- Задание со *: добавил все переменные окружения, необходимые для успешного старта контейнера, и статус пода после старта стал Running.

## Домашнее задание к уроку №3

- Запустил кластер kind состоящий из 4 нод
- Создал и запустил ReplicaSet, добавив описание селектора и переменных окружения
- Проскалировал ReplicaSet до 3, используя команду ad-hoc: kubectl scale rs frontend --replicas=3, и используя изменения в манифесте
- Обновление тэга образа контейнера в манифесте ReplicaSet не привело после применения манифеста к обновлению образов контейнеров подов, потому что обновление шаблонов контейнеров не относится к сфере ответственности ReplicaSet.
- Удалил все поды после изменения тега в манифесте и получил обновление образа в контейнерах.
- Собрал образ yunusovtr/hipster-paymentservice с тегами v0.0.1 и v0.0.2 и успешно запустил с ними репликасет с 3 репликами
- Скопировал манифест репликасета в деплоймент, стартовал
- Поменял тег образа в деплойменте и применил манифест, проследил роллинг апдейт подов, убедился, что тэги образов изменились
- Испытал откат деплоя
- Задание со *: изменил деплой для имитации Blue-Green и Reverse стратегий деплоя
- Создал деплоймент для frontend с readinessProbe
- Задание со *: запустил DaemonSet с node-exporter
- Задание с **: добавил tolerations в DaemonSet, чтобы запускался на мастер-ноде


